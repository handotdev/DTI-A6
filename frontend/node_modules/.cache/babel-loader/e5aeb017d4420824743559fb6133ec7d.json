{"ast":null,"code":"import _toConsumableArray from \"/Users/hanwang/Desktop/DTI/DTI-A6/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/hanwang/Desktop/DTI/DTI-A6/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/hanwang/Desktop/DTI/DTI-A6/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/hanwang/Desktop/DTI/DTI-A6/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/hanwang/Desktop/DTI/DTI-A6/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/hanwang/Desktop/DTI/DTI-A6/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/hanwang/Desktop/DTI/DTI-A6/frontend/src/ContactCardList.jsx\";\nimport React, { Component } from 'react';\nimport ContactCard from './ContactCard';\nimport NewContactCard from './NewContactCard';\n\nvar ContactCardList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ContactCardList, _Component);\n\n  function ContactCardList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ContactCardList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ContactCardList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: null\n    };\n\n    _this.newContactCardSubmit = function (name, email) {\n      fetch('/api/add-contact-card', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: name,\n          email: email\n        })\n      }).then(function (resp) {\n        return resp.text();\n      }).then(function (text) {\n        if (text === 'OK') {\n          _this.setState(function (_ref) {\n            var data = _ref.data;\n            return {\n              data: [].concat(_toConsumableArray(data), [{\n                name: name,\n                email: email\n              }])\n            };\n          });\n        } else {\n          alert('Your contact card is not added because the email repeats!');\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ContactCardList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      fetch('/api/contact-cards', {\n        method: 'GET'\n      }).then(function (resp) {\n        return resp.json();\n      }).then(function (data) {\n        return _this2.setState({\n          data: data\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var data = this.state.data;\n      return React.createElement(\"section\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }, \"Contact Card List\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, data == null ? 'Loading...' : data.map(function (contactCard) {\n        return React.createElement(ContactCard, Object.assign({\n          key: contactCard.email\n        }, contactCard, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 40\n          },\n          __self: this\n        }));\n      })), data != null && React.createElement(NewContactCard, {\n        onSubmit: this.newContactCardSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return ContactCardList;\n}(Component);\n\nexport { ContactCardList as default };","map":{"version":3,"sources":["/Users/hanwang/Desktop/DTI/DTI-A6/frontend/src/ContactCardList.jsx"],"names":["React","Component","ContactCard","NewContactCard","ContactCardList","state","data","newContactCardSubmit","name","email","fetch","method","headers","body","JSON","stringify","then","resp","text","setState","alert","json","map","contactCard"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;;IAEqBC,e;;;;;;;;;;;;;;;;;UACnBC,K,GAAQ;AAAEC,MAAAA,IAAI,EAAE;AAAR,K;;UAQRC,oB,GAAuB,UAACC,IAAD,EAAOC,KAAP,EAAiB;AACtCC,MAAAA,KAAK,CAAC,uBAAD,EAA0B;AAC7BC,QAAAA,MAAM,EAAE,MADqB;AAE7BC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB,SAFoB;AAG7BC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEP,UAAAA,IAAI,EAAJA,IAAF;AAAQC,UAAAA,KAAK,EAALA;AAAR,SAAf;AAHuB,OAA1B,CAAL,CAKGO,IALH,CAKQ,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACC,IAAL,EAAJ;AAAA,OALZ,EAMGF,IANH,CAMQ,UAAAE,IAAI,EAAI;AACZ,YAAIA,IAAI,KAAK,IAAb,EAAmB;AACjB,gBAAKC,QAAL,CACE;AAAA,gBAAGb,IAAH,QAAGA,IAAH;AAAA,mBAAe;AAAEA,cAAAA,IAAI,+BAAMA,IAAN,IAAY;AAAEE,gBAAAA,IAAI,EAAJA,IAAF;AAAQC,gBAAAA,KAAK,EAALA;AAAR,eAAZ;AAAN,aAAf;AAAA,WADF;AAGD,SAJD,MAIO;AACLW,UAAAA,KAAK,CAAC,2DAAD,CAAL;AACD;AACF,OAdH;AAeD,K;;;;;;;wCAtBmB;AAAA;;AAClBV,MAAAA,KAAK,CAAC,oBAAD,EAAuB;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAAvB,CAAL,CACGK,IADH,CACQ,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACI,IAAL,EAAJ;AAAA,OADZ,EAEGL,IAFH,CAEQ,UAAAV,IAAI;AAAA,eAAI,MAAI,CAACa,QAAL,CAAc;AAAEb,UAAAA,IAAI,EAAJA;AAAF,SAAd,CAAJ;AAAA,OAFZ;AAGD;;;6BAoBQ;AAAA,UACCA,IADD,GACU,KAAKD,KADf,CACCC,IADD;AAEP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGA,IAAI,IAAI,IAAR,GACG,YADH,GAEGA,IAAI,CAACgB,GAAL,CAAS,UAAAC,WAAW;AAAA,eAAI,oBAAC,WAAD;AAAa,UAAA,GAAG,EAAEA,WAAW,CAACd;AAA9B,WAAyCc,WAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAJ;AAAA,OAApB,CAHN,CAFF,EAQGjB,IAAI,IAAI,IAAR,IAAgB,oBAAC,cAAD;AAAgB,QAAA,QAAQ,EAAE,KAAKC,oBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARnB,CADF;AAYD;;;;EAzC0CN,S;;SAAxBG,e","sourcesContent":["import React, { Component } from 'react';\nimport ContactCard from './ContactCard';\nimport NewContactCard from './NewContactCard';\n\nexport default class ContactCardList extends Component {\n  state = { data: null };\n\n  componentDidMount() {\n    fetch('/api/contact-cards', { method: 'GET' })\n      .then(resp => resp.json())\n      .then(data => this.setState({ data }));\n  }\n\n  newContactCardSubmit = (name, email) => {\n    fetch('/api/add-contact-card', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ name, email })\n    })\n      .then(resp => resp.text())\n      .then(text => {\n        if (text === 'OK') {\n          this.setState(\n            ({ data }) => ({ data: [...data, { name, email }] }),\n          );\n        } else {\n          alert('Your contact card is not added because the email repeats!')\n        }\n      });\n  };\n\n  render() {\n    const { data } = this.state;\n    return (\n      <section>\n        <h3>Contact Card List</h3>\n        <div>\n          {data == null\n            ? 'Loading...'\n            : data.map(contactCard => <ContactCard key={contactCard.email} {...contactCard} />)\n          }\n        </div>\n        {data != null && <NewContactCard onSubmit={this.newContactCardSubmit} />}\n      </section>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}